window.index||function($){"use strict";function initSidebarScroll(){var a=$(".sidebar-menu"),b=$(window).height()-$("#content_heade").height(),c=a[0].scrollHeight,d=0;Object.defineProperty(a[0],"scrollTop",{set:function(a){d=a,$(this).css("position","relative").css("top",-a+"px")},get:function(){return d}}),c>b&&(isInitSidebarScroll?(a.parent().height(b),a.height(b)):(isInitSidebarScroll=!0,a.slimScroll({height:b,color:"#FFF"})),a.parent().css("overflow","visible"),a.css("overflow","visible"))}function load(container,url,selector,callback){return $.ajax({url:url,dataType:"html"}).done(function(responseText){var ele=$("<div>").append($.parseHTML(responseText,!0));container.html(ele.find(selector)),eval(ele.find("script").text())}).complete(callback&&function(a,b){container.each(callback,[a.responseText,b,a])})}var sidebar,refreshContent,loadContent,loadDialog,initSidebar=function(){var a,b="javascript:;";return function(c,d,e,f){c=c.sort(function(a,b){return a.weight-b.weight});for(var g=0;g<c.length;g++)!function(c){var g=c.url?c.url:b,h='<li id="sidebar_'+c.key+' sidebar_menu" value="'+c.weight+'"><a id="at" href="'+g+'"><i class="fa '+c.icon+'"></i>  <span>'+c.name+"</span>";("readData.readDataList"==c.key||"readData.readDataListHospital"==c.key||"readData.readDataListDepartment"==c.key)&&(h+=0!=f?'<span id="readCount" class="label label-danger pull-right">'+f+"</span>":'<span id="readCount" class="label label-danger pull-right" style="display: none">'+f+"</span>"),h+="</a></li>";var i=$(h).appendTo(d);e&&(i.addClass("treeview"),("outsideService"==c.key||"readData"==c.key||"insideService"==c.key)&&i.addClass("active")),c.childs&&c.childs.length&&(i.find("a").append('<i class="fa fa-angle-left pull-right"></i>'),initSidebar(c.childs,$('<ul class="treeview-menu"></ul>').appendTo(i),!1,f)),i.find("a").unbind("click").click(function(){var c=this.href;return c.length>0&&c!=b&&($(".sidebar").find("li.active").removeClass("active"),a=i,$(this).parents("li").addClass("active"),loadContent(c)),a&&a.addClass("active").parents("li").addClass("active"),!1})}(c[g])}}();sidebar=function(a,b,c,d){initSidebar(a,b,c,d),initSidebarScroll()};var isInitSidebarScroll=!1;$(window).resize(initSidebarScroll),loadContent=function(){var a,b=null;return function(c,d){d||history.pushState({url:c},null),b&&b.abort(),b=load($(".content-wrapper").stopLoading().startLoading(),c,".content-wrapper-inner",function(){b=null}),a=c}}(),$(window).on("popstate",function(a){loadContent(a.originalEvent.state.url,!0)}),loadDialog=function(options){var url="string"==typeof options?options:options.url,target="string"==typeof options?options:options.target;if(options=$.extend({backdrop:!1,content:"加载中..."},$.isPlainObject(options)?options:{}),!url)return $.alert("url 不能为空"),null;var dialog;dialog=$.dialog(options);var body=dialog.body;return body.startLoading(),dialog.overlay.on("shown.bs.modal",function(){var top=parseInt(dialog.dialog.css("marginTop"));top||(top=0),body.css("max-height",$(window).height()-(dialog.dialog.height()-body.height())-top),body.load(url+"  .dialog-content",function(txt){var doc=$("<div>").append($.parseHTML(txt,!0));eval(doc.find("script").text());var buttons=body.find(".dialog-footer-buttons");buttons.find("[type='submit']").click(function(){body.find("form").submit()}),buttons.appendTo(dialog.dialog.find(".modal-footer").empty()),body.find("form").submit(function(){var a=$(this);return dialog.dialog.startLoading(),$.ajax({cache:!1,dataType:"json",type:a.attr("method"),url:a.attr("action"),data:a.serialize(),error:function(a){dialog.dialog.stopLoading(),$.alert(a)},success:function(b){dialog.dialog.stopLoading(),1==b.status?a.vaild(b.msgMap):0==b.status?(dialog.close(),void 0!=target&&loadContent(target)):$.alert(b.msg)}}),!1})})}),dialog},refreshContent=function(){loadContent(curUrl)},window.index={sidebar:sidebar,refreshContent:refreshContent,loadContent:loadContent,loadDialog:loadDialog}}(jQuery);
//# sourceMappingURL=index.min.js.map