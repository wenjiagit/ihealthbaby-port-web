window.mini||function(a){"use strict";var b=(a(document),a(window),a(document.body),window.mini={vaild:function(b){var c=[];this.find(".vaild-message").remove(),this.find(".has-error").removeClass("has-error");var d=null;for(var e in b){var f=this.find("*[name='"+e+"']");if(d||(d=f),f.length)if(f.attr("id")==e){var g=f.parents(".form-group");g.addClass("has-error");var h=g.find("label");h.length||(h=a('<label class="control-label" for="'+e+'"></label>'),f.before(h)),h.append('<span class="vaild-message"> '+b[e]+"</span>")}else alert("表单域必须id 和name 属性相同, name:"+e);else c.push(b[e])}if(d&&d.focus(),c.length){var i=this.find(".alert");i.length||(i=a('<div class="alert"></div>')),i.addClass("alert-danger alert-dismissable").append('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><h4><i class="icon fa fa-ban"></i> 错误!</h4>');for(var j=0;j<c.length;j++)i.append("<div>"+c[j]+"</div>")}return this},baseTable:function(){function b(a){var b=a.parents("tr");a.prop("checked")?b.addClass("danger select"):b.removeClass("danger select")}var c=this;return c.find("tbody").find("tr").click(function(c){if(!a(c.target).is("input")){var d=a(this).find(".select-row-checkbox");d.prop("checked",!d.prop("checked")),b(d)}}),c.find(".select-row-checkbox").change(function(){b(a(this))}),c},startLoading:function(){return this.addClass("overlay-wrapper").append(a('<div class="overlay"><i class="fa fa-spinner fa-spin"></i></div>'))},stopLoading:function(){return this.removeClass("overlay-wrapper").find(".overlay").remove(),this},alert:function(b){a.dialog({type:"alert",title:"提示",content:b,size:"modal-sm"})},heartRateGrid:function(c){c=a.extend({data:[],doctor_data:0,fetal_data:0,fontSize:"12",fontStyle:"italic",fontName:'"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif',width:"170mm",height:"100mm",divY:"5",xStart:0,padding:[10,4,10,6],lineColor:"#000",paintRatioWidth:null,paintRatioHeight:null,dataShowCount:2400,lineWidth:1,printRatio:4,wrong:{start:90,end:100,lineColor:"green",lineWidth:1,rectColor:"rgba(205,237,253,0.3)"},xRuler:120,xRulerText:function(a,b){return b+"'"},xRulerLine:function(a,b){return 1},xRulerColor:function(a,b){return"#000"},xRulerStyle:function(a,b){return 0},xRulerDottedColor:function(a,b){return"#ccc"},yMax:220,yMin:40,yRuler:{40:{line:1,color:"#000"},50:{line:1,color:"#000"},60:{line:1,color:"#000",text:"60"},70:{line:1,color:"#000"},80:{line:1,color:"#000",text:"80"},90:{line:1,color:"#000"},100:{line:1,color:"#000",text:"100"},110:{line:1,color:"#000"},120:{line:1,color:"#000",text:"120"},130:{line:1,color:"#000"},140:{line:1,color:"#000",text:"140"},150:{line:1,color:"#000"},160:{line:1,color:"#000",text:"160"},170:{line:1,color:"#000"},180:{line:1,color:"#000",text:"180"},190:{line:1,color:"#000"},200:{line:1,color:"#000",text:"200"},210:{line:1,color:"#000"},220:{line:1,color:"#000",text:"220"}},yRuler_:{40:{line:1,color:"#adadad"},45:{line:1,color:"#adadad"},50:{line:1,color:"#adadad"},55:{line:1,color:"#adadad"},60:{line:1,color:"#fff"},65:{line:1,color:"#adadad"},70:{line:1,color:"#adadad"},75:{line:1,color:"#adadad"},80:{line:1,color:"#fff"},85:{line:1,color:"#adadad"},90:{line:1,color:"#adadad"},95:{line:1,color:"#adadad"},100:{line:1,color:"#adadad"},105:{line:1,color:"#adadad"},110:{line:1,color:"#fff"},115:{line:1,color:"#adadad"},120:{line:1,color:"#adadad"},125:{line:1,color:"#adadad"},130:{line:1,color:"#adadad"},135:{line:1,color:"#adadad"},140:{line:1,color:"#adadad"},145:{line:1,color:"#adadad"},150:{line:1,color:"#adadad"},155:{line:1,color:"#adadad"},160:{line:1,color:"#adadad"},165:{line:1,color:"#adadad"},170:{line:1,color:"#adadad"},175:{line:1,color:"#adadad"},180:{line:1,color:"#adadad"},185:{line:1,color:"#adadad"},190:{line:1,color:"#adadad"},195:{line:1,color:"#adadad"},200:{line:1,color:"#adadad"},205:{line:1,color:"#adadad"},210:{line:1,color:"#adadad"},215:{line:1,color:"#adadad"},220:{line:1,color:"#adadad"}}},a.isPlainObject(c)?c:{});var d=a("<div>").addClass("center-block").appendTo(this),e=(window.devicePixelRatio||1)*c.printRatio;c.paintRatioWidth&&(c.width=Math.floor(parseInt(c.width)*c.paintRatioWidth)+"mm"),d.width(c.width),c.paintRatioHeight&&(c.height=Math.floor(parseInt(c.height)*c.paintRatioHeight)+"mm"),d.height(c.height);for(var f=d.width(),g=d.height(),h=a('<canvas width="'+f*e+'" height="'+g*e+'" id="canvas"></canvas>').appendTo(d).width(f).height(g)[0],i=f/parseInt(c.width),j=c.padding,k=0;k<j.length;k++)j[k]=j[k]*i;c.ratio=e,c.showWidth=f*e,c.showHeight=g*e,b.heartRateGridPaint(h,c)},heartRateGridPaint:function(a,b){function c(a,c){if(null!=a&&a.length>0)for(var d=60*N*1e3,e=60*b.xStart*1e3,f=0;f<a.length;f++){var g=a[f];if(!(e>g||g>d)){var i=g/1e3,j=0,k=0;if(!(f>0&&(j=a[f-1],k=j/1e3,5>i-k))){var l=(g-e)*D/500;h(l,c)}}}}function d(a){return a*j}function e(a){return Math.round(o+v*(w-(a-b.yMin))/w)}function f(a){return Math.round(r+D*a)}function g(a){var b=z.measureText(a);return{width:Math.round(b.width*j),height:Math.round(b.width*j)}}function h(a,c){var e,f,g=50,h=a,i=a;c?(e=Math.round(v/w*(g-b.yMin)),f=0):(e=0,f=Math.round(v/w*(g-b.yMin)));var k=0,l=0,m=new Array(h+r,-e+t-q),n=new Array(i+r,-f+t-q);z.beginPath(),z.lineWidth=d(1.5*b.lineWidth),z.translate(k,l,0),z.moveTo(m[0],m[1]),z.lineTo(n[0],n[1]),z.fill(),z.stroke(),z.save(),z.translate(n[0],n[1]);var o=(n[0]-m[0])/(n[1]-m[1]);o=Math.atan(o),n[1]-m[1]>=0?z.rotate(-o):z.rotate(Math.PI-o);var p=.6*j;z.lineTo(-5*p,-10*p),z.lineTo(0,-5*p),z.lineTo(5*p,-10*p),z.lineTo(0,0),z.fill(),z.restore(),z.closePath()}function i(a,b){z.beginPath(),z.lineWidth=d(a),z.strokeStyle=b;for(var c=!1,g=0;g<k.length;g++){var h=k[g],i=0;g>0&&(i=Math.abs(k[g-1]-h)),h>40&&220>=h?(c&&20>i?z.lineTo(f(g),e(h)):z.moveTo(f(g),e(h)),c=!0):c=!1}z.stroke(),z.closePath()}var j=b.ratio,k=b.data,l=Math.max(b.dataShowCount||k.length,k.length),m=Math.ceil(l/b.xRuler)*b.xRuler,n=b.padding,o=Math.floor(n[0]*j),p=Math.floor(n[1]*j),q=Math.floor(n[2]*j),r=Math.floor(n[3]*j),s=b.showWidth,t=b.showHeight,u=s-p-r,v=t-o-q,w=b.yMax-b.yMin,x=b.fetal_data,y=b.doctor_data,z=a.getContext("2d"),A=b.fontStyle+" "+b.fontSize*j+"px "+b.fontName,B=g("888");z.font=A;var C,D=u/m,E=b.wrong;E&&(C=e(E.end),z.save(),z.fillStyle=E.rectColor,z.fillRect(r,C,u,e(E.start)-C),z.restore());var F,G,H,I=b.yRuler,J=b.yRuler_;if(5==b.divY)for(var K in J)if(J.hasOwnProperty(K)){z.beginPath();var L=J[K];F=d(L.line),z.lineWidth=F,z.strokeStyle=L.color,H=e(parseInt(K));for(var M=0;u-20>M;M+=40)z.moveTo(r+M,H),z.lineTo(r+M+20,H);z.stroke(),z.closePath()}for(var K in I)if(I.hasOwnProperty(K)){z.beginPath();var L=I[K];F=d(L.line),z.lineWidth=F,z.strokeStyle=L.color,H=e(parseInt(K)),z.moveTo(r,H),z.lineTo(r+u,H),z.stroke(),z.closePath(),L.text&&z.fillText(L.text,r-B.width-2*j,Math.round(H+B.height/3/2+F/2))}for(var N=0,O=0,P=0;m>=O;O+=b.xRuler,P++){z.beginPath(),F=d(b.xRulerLine(O,P)),z.strokeStyle=b.xRulerColor(O,P),z.lineWidth=F;var Q=b.xRulerStyle(O,P);if(G=f(parseInt(O)),0==Q){z.moveTo(G,o),z.lineTo(G,o+v),z.stroke(),z.closePath();var R=b.xRulerText(O,P);R&&z.fillText(R,G-B.width- -12*j,o+v+B.height+2)}else{z.strokeStyle=b.xRulerDottedColor(O,P);for(var M=0;v>M;M+=40)z.moveTo(G,o+M),z.lineTo(G,o+M+20);z.stroke(),z.closePath()}}N=P,c(x),c(y,!0),i(b.lineWidth,b.lineColor),E&&(z.save(),z.beginPath(),C=e(E.end),z.rect(r,C,u,e(E.start)-C),z.clip(),i(E.lineWidth,E.lineColor),z.restore())},dialog:function(b){b=a.extend({type:"confirm",title:"友情提示",content:"您确定吗？",cancelCallBack:function(){},sureCallBack:function(){},showAnimate:!0,size:"",backdrop:!0,sureText:"确定"},a.isPlainObject(b)?b:{});var c=b.type,d=b.title,e=b.content,f=b.cancelCallBack,g=b.sureCallBack,h=b.showAnimate,i=b.size,j=b.backdrop,k=b.sureText;"success"==c?(e='<div style="text-align: center"><span class="glyphicon glyphicon-ok" style="color:green;font-size:40px;"></span></div>   <div style="text-align: center">'+e+"</div>",c="alert"):"failed"==c&&(e='<div style="text-align: center"><span class="glyphicon glyphicon-remove" style="color:red;font-size:40px;"></span></div><div style="text-align: center">'+e+"</div>",c="alert");var l=h?"fade":"",m=a('<div class="modal wModal '+l+' " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog '+i+'"><div class="modal-content"><div class="modal-header"><button type="button" class="close wCancle" ><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button><h4 class="modal-title" id="wModalLabel">'+d+'</h4></div><div class="modal-body">'+e+'</div><div class="modal-footer"><button type="button" class="btn btn-default pull-left wCancle" >关闭</button><button type="button" class="btn btn-primary wSure" >'+k+"</button></div></div></div></div>").appendTo("body"),n=m.find(".wSure"),o=m.find(".wCancle");"alert"==c?n.hide():"confirm"==c&&n.show(),m.on("hidden.bs.modal",function(a){m.remove()}),b.shown&&m.on("shown.bs.modal",b.shown),m.modal({keyboard:!0,backdrop:j}),n.click(function(){var a=!1;g&&(a=g()),a||m.modal("hide")});var p=function(){var a=!1;f&&(a=f()),a||m.modal("hide")};return o.click(p),{overlay:m,body:m.find(".modal-body"),dialog:m.find(".modal-dialog"),close:p}},ajaxError:function(a,b,c){Messenger.options={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-center",theme:"flat",maxMessages:6},404===(null!=b?b.status:void 0)?Messenger().post({message:"请求不能找到："+c.url,type:"error",showCloseButton:!0}):Messenger().post({message:"请求错误："+c.url,type:"error",showCloseButton:!0})}});a.fn.extend({vaild:b.vaild,startLoading:b.startLoading,stopLoading:b.stopLoading,baseTable:b.baseTable,heartRateGrid:b.heartRateGrid}),a.extend({dialog:b.dialog,alert:b.alert}),a.mini={ajaxGet:b.ajaxGet}}(jQuery);
//# sourceMappingURL=main.min.js.map